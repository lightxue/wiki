<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>logrotate 10例 | Wiki</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/img/light.jpg">
    <meta name="description" content="零散知识整理">
    
    <link rel="preload" href="/assets/css/0.styles.9bacae9a.css" as="style"><link rel="preload" href="/assets/js/app.9dae38e9.js" as="script"><link rel="preload" href="/assets/js/3.4abcd7a2.js" as="script"><link rel="preload" href="/assets/js/50.afaf2fca.js" as="script"><link rel="prefetch" href="/assets/js/10.df3455a3.js"><link rel="prefetch" href="/assets/js/11.c59b118c.js"><link rel="prefetch" href="/assets/js/12.c36a1f3d.js"><link rel="prefetch" href="/assets/js/13.d15f9418.js"><link rel="prefetch" href="/assets/js/14.177640ab.js"><link rel="prefetch" href="/assets/js/15.e0f1c3e4.js"><link rel="prefetch" href="/assets/js/16.ac035512.js"><link rel="prefetch" href="/assets/js/17.d75968db.js"><link rel="prefetch" href="/assets/js/18.09684116.js"><link rel="prefetch" href="/assets/js/19.aadc037e.js"><link rel="prefetch" href="/assets/js/2.981b1c8d.js"><link rel="prefetch" href="/assets/js/20.35a4d618.js"><link rel="prefetch" href="/assets/js/21.ce3e5b46.js"><link rel="prefetch" href="/assets/js/22.d4cd79de.js"><link rel="prefetch" href="/assets/js/23.34ec6a65.js"><link rel="prefetch" href="/assets/js/24.b4d25989.js"><link rel="prefetch" href="/assets/js/25.727e3c65.js"><link rel="prefetch" href="/assets/js/26.dc335f46.js"><link rel="prefetch" href="/assets/js/27.ce04fe97.js"><link rel="prefetch" href="/assets/js/28.0fcbf891.js"><link rel="prefetch" href="/assets/js/29.981e14cb.js"><link rel="prefetch" href="/assets/js/30.fe37c375.js"><link rel="prefetch" href="/assets/js/31.6189fca1.js"><link rel="prefetch" href="/assets/js/32.3c9db7b5.js"><link rel="prefetch" href="/assets/js/33.dee120c9.js"><link rel="prefetch" href="/assets/js/34.a1f81088.js"><link rel="prefetch" href="/assets/js/35.e9e2da53.js"><link rel="prefetch" href="/assets/js/36.3581a75a.js"><link rel="prefetch" href="/assets/js/37.399c4183.js"><link rel="prefetch" href="/assets/js/38.8b7fd485.js"><link rel="prefetch" href="/assets/js/39.e22a8c5d.js"><link rel="prefetch" href="/assets/js/4.77c5fa51.js"><link rel="prefetch" href="/assets/js/40.9c3e9994.js"><link rel="prefetch" href="/assets/js/41.21c41acf.js"><link rel="prefetch" href="/assets/js/42.d4611f61.js"><link rel="prefetch" href="/assets/js/43.88e2789f.js"><link rel="prefetch" href="/assets/js/44.82c5e661.js"><link rel="prefetch" href="/assets/js/45.2f0a9510.js"><link rel="prefetch" href="/assets/js/46.997c08ab.js"><link rel="prefetch" href="/assets/js/47.57ecd951.js"><link rel="prefetch" href="/assets/js/48.1ff2ad07.js"><link rel="prefetch" href="/assets/js/49.6f262be5.js"><link rel="prefetch" href="/assets/js/5.1071f068.js"><link rel="prefetch" href="/assets/js/51.5af0d2f8.js"><link rel="prefetch" href="/assets/js/52.1352403d.js"><link rel="prefetch" href="/assets/js/53.3c2a757f.js"><link rel="prefetch" href="/assets/js/54.55c5d748.js"><link rel="prefetch" href="/assets/js/55.ef3decdc.js"><link rel="prefetch" href="/assets/js/6.c5c1fac5.js"><link rel="prefetch" href="/assets/js/7.e873474e.js"><link rel="prefetch" href="/assets/js/8.4f3707f7.js"><link rel="prefetch" href="/assets/js/9.72c2b309.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9bacae9a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Wiki</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/languages/python/" class="nav-link">
  编程语言
</a></div><div class="nav-item"><a href="/systems/linux/" class="nav-link">
  操作系统
</a></div><div class="nav-item"><a href="/tools/shell/" class="nav-link router-link-active">
  工具
</a></div><div class="nav-item"><a href="/others/rubiks/" class="nav-link">
  其它
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/languages/python/" class="nav-link">
  编程语言
</a></div><div class="nav-item"><a href="/systems/linux/" class="nav-link">
  操作系统
</a></div><div class="nav-item"><a href="/tools/shell/" class="nav-link router-link-active">
  工具
</a></div><div class="nav-item"><a href="/others/rubiks/" class="nav-link">
  其它
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>GDB</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tools/gdb/" class="sidebar-link">GDB</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Git</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tools/git/" class="sidebar-link">Git</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>MySQL</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tools/mysql/" class="sidebar-link">MySQL</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Nginx</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tools/nginx/" class="sidebar-link">Nginx</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>sed</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tools/sed/" class="sidebar-link">sed</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Shell</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tools/shell/" aria-current="page" class="sidebar-link">Shell</a></li><li><a href="/tools/shell/awesome-cli.html" class="sidebar-link">Awesome CLI</a></li><li><a href="/tools/shell/dd-speed-test.html" class="sidebar-link">磁盘读写压测</a></li><li><a href="/tools/shell/logrotate-examples.html" aria-current="page" class="active sidebar-link">logrotate 10例</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tools/shell/logrotate-examples.html#_1-logrotate-configuration-files" class="sidebar-link">1. Logrotate Configuration files</a></li><li class="sidebar-sub-header"><a href="/tools/shell/logrotate-examples.html#_2-logrotate-size-option-rotate-the-log-file-when-file-size-reaches-a-specific-limit" class="sidebar-link">2. Logrotate size option: Rotate the log file when file size reaches a specific limit</a></li><li class="sidebar-sub-header"><a href="/tools/shell/logrotate-examples.html#_3-logrotate-copytruncate-option-continue-to-write-the-log-information-in-the-newly-created-file-after-rotating-the-old-log-file" class="sidebar-link">3. Logrotate copytruncate option: Continue to write the log information in the newly created file after rotating the old log file.</a></li><li class="sidebar-sub-header"><a href="/tools/shell/logrotate-examples.html#_4-logrotate-compress-option-compress-the-rotated-log-files" class="sidebar-link">4. Logrotate compress option: Compress the rotated log files</a></li><li class="sidebar-sub-header"><a href="/tools/shell/logrotate-examples.html#_5-logrotate-dateext-option-rotate-the-old-log-file-with-date-in-the-log-filename" class="sidebar-link">5. Logrotate dateext option: Rotate the old log file with date in the log filename</a></li><li class="sidebar-sub-header"><a href="/tools/shell/logrotate-examples.html#_6-logrotate-monthly-daily-weekly-option-rotate-the-log-file-weekly-daily-monthly" class="sidebar-link">6. Logrotate monthly, daily, weekly option: Rotate the log file weekly/daily/monthly</a></li><li class="sidebar-sub-header"><a href="/tools/shell/logrotate-examples.html#_7-logrotate-postrotate-endscript-option-run-custom-shell-scripts-immediately-after-log-rotation" class="sidebar-link">7. Logrotate postrotate endscript option: Run custom shell scripts immediately after log rotation</a></li><li class="sidebar-sub-header"><a href="/tools/shell/logrotate-examples.html#_8-logrotate-maxage-option-remove-older-rotated-log-files" class="sidebar-link">8. Logrotate maxage option: Remove older rotated log files</a></li><li class="sidebar-sub-header"><a href="/tools/shell/logrotate-examples.html#_9-logrotate-missingok-option-dont-return-error-if-the-log-file-is-missing" class="sidebar-link">9. Logrotate missingok option: Dont return error if the log file is missing</a></li><li class="sidebar-sub-header"><a href="/tools/shell/logrotate-examples.html#_10-logrotate-compresscmd-and-compressext-option-sspecify-compression-command-for-the-log-file-rotation" class="sidebar-link">10. Logrotate compresscmd and compressext option: Sspecify compression command for the log file rotation</a></li></ul></li><li><a href="/tools/shell/samba.html" class="sidebar-link">samba</a></li><li><a href="/tools/shell/ssh-without-password.html" class="sidebar-link">SSH免密码</a></li><li><a href="/tools/shell/string-escape.html" class="sidebar-link">bash的字符串转义</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>tmux</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tools/tmux/" class="sidebar-link">tmux</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Vim</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tools/vim/" class="sidebar-link">Vim</a></li><li><a href="/tools/vim/vim-current-env.html" class="sidebar-link">显示vim当前环境变量</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="logrotate-10例"><a href="#logrotate-10例" class="header-anchor">#</a> logrotate 10例</h1> <p>转自 http://www.thegeekstuff.com/2010/07/logrotate-examples/</p> <p>Managing log files effectively is an essential task for Linux sysadmin.</p> <p>In this article, let us discuss how to perform following log file operations using UNIX logrotate utility.</p> <ul><li>Rotate the log file when file size reaches a specific size</li> <li>Continue to write the log information to the newly created file after rotating the old log file</li> <li>Compress the rotated log files</li> <li>Specify compression option for the rotated log files</li> <li>Rotate the old log files with the date in the filename</li> <li>Execute custom shell scripts immediately after log rotation</li> <li>Remove older rotated log files</li></ul> <h2 id="_1-logrotate-configuration-files"><a href="#_1-logrotate-configuration-files" class="header-anchor">#</a> 1. Logrotate Configuration files</h2> <p>Following are the key files that you should be aware of for logrotate to work properly.</p> <p><code>/usr/sbin/logrotate</code> – The logrotate command itself.</p> <p><code>/etc/cron.daily/logrotate</code> – This shell script executes the logrotate command everyday.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">cat</span> /etc/cron.daily/logrotate
<span class="token comment">#!/bin/sh</span>

/usr/sbin/logrotate /etc/logrotate.conf
<span class="token assign-left variable">EXITVALUE</span><span class="token operator">=</span><span class="token variable">$?</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$EXITVALUE</span> <span class="token operator">!=</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    /usr/bin/logger -t <span class="token function">logrotate</span> <span class="token string">&quot;ALERT exited abnormally with [<span class="token variable">$EXITVALUE</span>]&quot;</span>
<span class="token keyword">fi</span>
<span class="token builtin class-name">exit</span> <span class="token number">0</span>
</code></pre></div><p><code>/etc/logrotate.conf</code> – Log rotation configuration for all the log files are specified in this file.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">cat</span> /etc/logrotate.conf
weekly
rotate <span class="token number">4</span>
create
include /etc/logrotate.d
/var/log/wtmp <span class="token punctuation">{</span>
    monthly
    minsize 1M
    create 0664 root utmp
    rotate <span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>/etc/logrotate.d</code> – When individual packages are installed on the system, they drop the log rotation configuration information in this directory. For example, yum log rotate configuration information is shown below.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">cat</span> /etc/logrotate.d/yum
/var/log/yum.log <span class="token punctuation">{</span>
    missingok
    notifempty
    size 30k
    yearly
    create 0600 root root
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_2-logrotate-size-option-rotate-the-log-file-when-file-size-reaches-a-specific-limit"><a href="#_2-logrotate-size-option-rotate-the-log-file-when-file-size-reaches-a-specific-limit" class="header-anchor">#</a> 2. Logrotate size option: Rotate the log file when file size reaches a specific limit</h2> <p>If you want to rotate a log file (for example, /tmp/output.log) for every 1KB, create the logrotate.conf as shown below.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">cat</span> logrotate.conf
/tmp/output.log <span class="token punctuation">{</span>
        size 1k
        create <span class="token number">700</span> bala bala
        rotate <span class="token number">4</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This logrotate configuration has following three options:</p> <ul><li>size 1k – logrotate runs only if the filesize is equal to (or greater than) this size.</li> <li>create – rotate the original file and create the new file with specified permission, user and group.</li> <li>rotate – limits the number of log file rotation. So, this would keep only the recent 4 rotated log files.</li></ul> <p>Before the logrotation, following is the size of the output.log:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">ls</span> -l /tmp/output.log
-rw-r--r-- <span class="token number">1</span> bala bala <span class="token number">25868</span> <span class="token number">2010</span>-06-09 <span class="token number">21</span>:19 /tmp/output.log
</code></pre></div><p>Now, run the logrotate command as shown below. Option -s specifies the filename to write the logrotate status.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">logrotate</span> -s /var/log/logstatus logrotate.conf
</code></pre></div><p>Note : whenever you need of log rotation for some files, prepare the logrotate configuration and run the logroate command manually.
After the logrotation, following is the size of the output.log:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">ls</span> -l /tmp/output*
-rw-r--r--  <span class="token number">1</span> bala bala <span class="token number">25868</span> <span class="token number">2010</span>-06-09 <span class="token number">21</span>:20 output.log.1
-rwx------ <span class="token number">1</span> bala bala        <span class="token number">0</span> <span class="token number">2010</span>-06-09 <span class="token number">21</span>:20 output.log
</code></pre></div><p>Eventually this will keep following setup of rotated log files.</p> <ul><li>output.log.4.</li> <li>output.log.3</li> <li>output.log.2</li> <li>output.log.1</li> <li>output.log</li></ul> <p>Please remember that after the log rotation, the log file corresponds to the service would still point to rotated file (output.log.1) and keeps on writing in it. You can use the above method, if you want to rotate the apache <code>access_log</code> or <code>error_log</code> every 5 MB.</p> <p>Ideally, you should modify the /etc/logrotate.conf to specify the logrotate information for a specific log file.</p> <p>Also, if you are having huge log files, you can use: 10 Awesome Examples for Viewing Huge Log Files in Unix</p> <h2 id="_3-logrotate-copytruncate-option-continue-to-write-the-log-information-in-the-newly-created-file-after-rotating-the-old-log-file"><a href="#_3-logrotate-copytruncate-option-continue-to-write-the-log-information-in-the-newly-created-file-after-rotating-the-old-log-file" class="header-anchor">#</a> 3. Logrotate copytruncate option: Continue to write the log information in the newly created file after rotating the old log file.</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">cat</span> logrotate.conf
/tmp/output.log <span class="token punctuation">{</span>
         size 1k
         copytruncate
         rotate <span class="token number">4</span>
<span class="token punctuation">}</span>
</code></pre></div><p>copytruncate instruct logrotate to creates the copy of the original file (i.e rotate the original log file) and truncates the original file to zero byte size. This helps the respective service that belongs to that log file can write to the proper file.</p> <p>While manipulating log files, you might find the sed substitute, sed delete tips helpful.</p> <h2 id="_4-logrotate-compress-option-compress-the-rotated-log-files"><a href="#_4-logrotate-compress-option-compress-the-rotated-log-files" class="header-anchor">#</a> 4. Logrotate compress option: Compress the rotated log files</h2> <p>If you use the compress option as shown below, the rotated files will be compressed with gzip utility.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">cat</span> logrotate.conf
/tmp/output.log <span class="token punctuation">{</span>
        size 1k
        copytruncate
        create <span class="token number">700</span> bala bala
        rotate <span class="token number">4</span>
        compress
<span class="token punctuation">}</span>
</code></pre></div><p>Output of compressed log file:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">ls</span> /tmp/output*
output.log.1.gz output.log
</code></pre></div><h2 id="_5-logrotate-dateext-option-rotate-the-old-log-file-with-date-in-the-log-filename"><a href="#_5-logrotate-dateext-option-rotate-the-old-log-file-with-date-in-the-log-filename" class="header-anchor">#</a> 5. Logrotate dateext option: Rotate the old log file with date in the log filename</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">cat</span> logrotate.conf
/tmp/output.log <span class="token punctuation">{</span>
        size 1k
        copytruncate
        create <span class="token number">700</span> bala bala
        dateext
        rotate <span class="token number">4</span>
        compress
<span class="token punctuation">}</span>
</code></pre></div><p>After the above configuration, you’ll notice the date in the rotated log file as shown below.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">ls</span> -lrt /tmp/output*
-rw-r--r--  <span class="token number">1</span> bala bala <span class="token number">8980</span> <span class="token number">2010</span>-06-09 <span class="token number">22</span>:10 output.log-20100609.gz
-rwxrwxrwx <span class="token number">1</span> bala bala     <span class="token number">0</span> <span class="token number">2010</span>-06-09 <span class="token number">22</span>:11 output.log
</code></pre></div><p>This would work only once in a day. Because when it tries to rotate next time on the same day, earlier rotated file will be having the same filename. So, the logrotate wont be successful after the first run on the same day.</p> <p>Typically you might use tail -f to view the output of the log file in realtime. You can even combine multiple tail -f output and display it on single terminal.</p> <h2 id="_6-logrotate-monthly-daily-weekly-option-rotate-the-log-file-weekly-daily-monthly"><a href="#_6-logrotate-monthly-daily-weekly-option-rotate-the-log-file-weekly-daily-monthly" class="header-anchor">#</a> 6. Logrotate monthly, daily, weekly option: Rotate the log file weekly/daily/monthly</h2> <p>For doing the rotation monthly once,</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">cat</span> logrotate.conf
/tmp/output.log <span class="token punctuation">{</span>
        monthly
        copytruncate
        rotate <span class="token number">4</span>
        compress
<span class="token punctuation">}</span>
</code></pre></div><p>Add the weekly keyword as shown below for weekly log rotation.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">cat</span> logrotate.conf
/tmp/output.log <span class="token punctuation">{</span>
        weekly
        copytruncate
        rotate <span class="token number">4</span>
        compress
<span class="token punctuation">}</span>
</code></pre></div><p>Add the daily keyword as shown below for every day log rotation. You can also rotate logs hourly.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">cat</span> logrotate.conf
/tmp/output.log <span class="token punctuation">{</span>
        daily
        copytruncate
        rotate <span class="token number">4</span>
        compress
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_7-logrotate-postrotate-endscript-option-run-custom-shell-scripts-immediately-after-log-rotation"><a href="#_7-logrotate-postrotate-endscript-option-run-custom-shell-scripts-immediately-after-log-rotation" class="header-anchor">#</a> 7. Logrotate postrotate endscript option: Run custom shell scripts immediately after log rotation</h2> <p>Logrotate allows you to run your own custom shell scripts after it completes the log file rotation. The following configuration indicates that it will execute myscript.sh after the logrotation.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">cat</span> logrotate.conf
/tmp/output.log <span class="token punctuation">{</span>
        size 1k
        copytruncate
        rotate <span class="token number">4</span>
        compress
        postrotate
               /home/bala/myscript.sh
        endscript
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_8-logrotate-maxage-option-remove-older-rotated-log-files"><a href="#_8-logrotate-maxage-option-remove-older-rotated-log-files" class="header-anchor">#</a> 8. Logrotate maxage option: Remove older rotated log files</h2> <p>Logrotate automatically removes the rotated files after a specific number of days.  The following example indicates that the rotated log files would be removed after 100 days.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">cat</span> logrotate.conf
/tmp/output.log <span class="token punctuation">{</span>
        size 1k
        copytruncate
        rotate <span class="token number">4</span>
        compress
        maxage <span class="token number">100</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_9-logrotate-missingok-option-dont-return-error-if-the-log-file-is-missing"><a href="#_9-logrotate-missingok-option-dont-return-error-if-the-log-file-is-missing" class="header-anchor">#</a> 9. Logrotate missingok option: Dont return error if the log file is missing</h2> <p>You can ignore the error message when the actual file is not available by using this option as shown below.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">cat</span> logrotate.conf
/tmp/output.log <span class="token punctuation">{</span>
        size 1k
        copytruncate
        rotate <span class="token number">4</span>
        compress
        missingok
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_10-logrotate-compresscmd-and-compressext-option-sspecify-compression-command-for-the-log-file-rotation"><a href="#_10-logrotate-compresscmd-and-compressext-option-sspecify-compression-command-for-the-log-file-rotation" class="header-anchor">#</a> 10. Logrotate compresscmd and compressext option: Sspecify compression command for the log file rotation</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">cat</span> logrotate.conf
/tmp/output.log <span class="token punctuation">{</span>
        size 1k
        copytruncate
        create
        compress
        compresscmd /bin/bzip2
        compressext .bz2
        rotate <span class="token number">4</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Following compression options are specified above:</p> <ul><li>compress – Indicates that compression should be done.</li> <li>compresscmd – Specify what type of compression command should be used. For example: /bin/bzip2</li> <li>compressext – Specify the extension on the rotated log file. Without this option, the rotated file would have the default extension as .gz. So, if you use bzip2 compressioncmd, specify the extension as .bz2 as shown in the above example.入门10例</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/tools/shell/dd-speed-test.html" class="prev">
        磁盘读写压测
      </a></span> <span class="next"><a href="/tools/shell/samba.html">
        samba
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.9dae38e9.js" defer></script><script src="/assets/js/3.4abcd7a2.js" defer></script><script src="/assets/js/50.afaf2fca.js" defer></script>
  </body>
</html>
