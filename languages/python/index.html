<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Python | Wiki</title>
    <meta name="description" content="零散知识整理">
    <link rel="icon" href="/img/light.jpg">
    
    <link rel="preload" href="/assets/css/styles.5b7ffe9c.css" as="style"><link rel="preload" href="/assets/js/app.5b7ffe9c.js" as="script"><link rel="preload" href="/assets/js/10.df5a72d0.js" as="script"><link rel="prefetch" href="/assets/css/1.styles.7b88d93e.css"><link rel="prefetch" href="/assets/js/1.7b88d93e.js"><link rel="prefetch" href="/assets/css/2.styles.2c1a306a.css"><link rel="prefetch" href="/assets/js/2.2c1a306a.js"><link rel="prefetch" href="/assets/js/3.15a0ef88.js"><link rel="prefetch" href="/assets/js/4.0dbd771f.js"><link rel="prefetch" href="/assets/js/5.1462a9b2.js"><link rel="prefetch" href="/assets/js/6.211117c9.js"><link rel="prefetch" href="/assets/js/7.5e2aaf30.js"><link rel="prefetch" href="/assets/js/8.127b031c.js"><link rel="prefetch" href="/assets/js/9.4481dafa.js"><link rel="prefetch" href="/assets/js/11.a621771b.js"><link rel="prefetch" href="/assets/js/12.b625453f.js"><link rel="prefetch" href="/assets/js/13.c49d8365.js"><link rel="prefetch" href="/assets/js/14.f77903de.js"><link rel="prefetch" href="/assets/js/15.80fc6806.js"><link rel="prefetch" href="/assets/js/16.7253cd81.js"><link rel="prefetch" href="/assets/js/17.ca8623e3.js"><link rel="prefetch" href="/assets/js/18.26077baf.js"><link rel="prefetch" href="/assets/js/19.51153160.js"><link rel="prefetch" href="/assets/js/20.145ed8ab.js"><link rel="prefetch" href="/assets/js/21.2acba7a0.js"><link rel="prefetch" href="/assets/js/22.0e3f1b23.js"><link rel="prefetch" href="/assets/js/23.a67bd505.js"><link rel="prefetch" href="/assets/js/24.991a090d.js"><link rel="prefetch" href="/assets/js/25.1e799e9b.js"><link rel="prefetch" href="/assets/js/26.85c7c013.js"><link rel="prefetch" href="/assets/js/27.c702421e.js"><link rel="prefetch" href="/assets/js/28.ae1fa254.js"><link rel="prefetch" href="/assets/js/29.cd20b578.js"><link rel="prefetch" href="/assets/js/30.3af06612.js"><link rel="prefetch" href="/assets/js/31.218c2e21.js"><link rel="prefetch" href="/assets/js/32.92eaf138.js"><link rel="prefetch" href="/assets/js/33.0873c274.js"><link rel="prefetch" href="/assets/js/34.ff2e685c.js"><link rel="prefetch" href="/assets/js/35.850652ed.js"><link rel="prefetch" href="/assets/js/36.ac6feeea.js"><link rel="prefetch" href="/assets/js/37.4881b61f.js"><link rel="prefetch" href="/assets/js/38.8b6ab604.js"><link rel="prefetch" href="/assets/js/39.6776458a.js"><link rel="prefetch" href="/assets/js/40.2e6a74d2.js"><link rel="prefetch" href="/assets/js/41.21a1a7c4.js"><link rel="prefetch" href="/assets/js/42.4692e547.js"><link rel="prefetch" href="/assets/js/43.a62ce5a7.js"><link rel="prefetch" href="/assets/js/44.e548be0d.js"><link rel="prefetch" href="/assets/js/45.1050a966.js"><link rel="prefetch" href="/assets/js/46.81565981.js"><link rel="prefetch" href="/assets/js/47.e0b2fdec.js"><link rel="prefetch" href="/assets/js/48.4490724e.js"><link rel="prefetch" href="/assets/js/49.62efbde7.js"><link rel="prefetch" href="/assets/js/50.b9c4c544.js">
    <link rel="stylesheet" href="/assets/css/styles.5b7ffe9c.css"><link rel="stylesheet" href="/assets/css/1.styles.7b88d93e.css"><link rel="stylesheet" href="/assets/css/2.styles.2c1a306a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Wiki</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/languages/python/" class="nav-link router-link-exact-active router-link-active">编程语言</a></div><div class="nav-item"><a href="/systems/linux/" class="nav-link">操作系统</a></div><div class="nav-item"><a href="/tools/shell/" class="nav-link">工具</a></div><div class="nav-item"><a href="/others/rubiks/" class="nav-link">其它</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/languages/python/" class="nav-link router-link-exact-active router-link-active">编程语言</a></div><div class="nav-item"><a href="/systems/linux/" class="nav-link">操作系统</a></div><div class="nav-item"><a href="/tools/shell/" class="nav-link">工具</a></div><div class="nav-item"><a href="/others/rubiks/" class="nav-link">其它</a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span>AWK</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/languages/awk/" class="sidebar-link">AWK</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Bash</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/languages/bash/" class="sidebar-link">Bash</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>C/C++</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/languages/c-cpp/" class="sidebar-link">C/C++</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>JavaScript</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/languages/javascript/" class="sidebar-link">JavaScript</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>Python</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/languages/python/" class="active sidebar-link">Python</a></li><li><a href="/languages/python/logging-usage.html" class="sidebar-link">logging使用</a></li><li><a href="/languages/python/python-syntactic-sugar.html" class="sidebar-link">python语法糖</a></li><li><a href="/languages/python/python-traps-and-pitfalls.html" class="sidebar-link">python的陷阱与缺陷</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="python"><a href="#python" aria-hidden="true" class="header-anchor">#</a> Python</h1> <ul><li><p>最近经常在linux执行python程序，比如./server.py，会提示“: No such file or directory”，令人不解。原来是换行符是dos的话就会这样，改成unix换行符就没有问题了</p></li> <li><p>datetime类型对象和1970年以来的秒数互转，datetime.datetime.now()的返回值是datetime对象，time.time()返回的是1970年到现在的秒数。补充一下，UTC是世界协调时间(对于UTC这个名字的来源无力吐槽，详见维基百科)，虽然GMT时间不再用，但我YY可以把UTC和GMT等同。</p></li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> datetime
<span class="token keyword">import</span> time

time<span class="token punctuation">.</span>mktime<span class="token punctuation">(</span>datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>timetuple<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>fromtimestamp<span class="token punctuation">(</span>time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>time、datetime、str互转</li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># 把datetime转成字符串</span>
<span class="token keyword">def</span> <span class="token function">datetime_toString</span><span class="token punctuation">(</span>dt<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> dt<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">&quot;%Y-%m-%d %H:%M:%S&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># 把字符串转成datetime</span>
<span class="token keyword">def</span> <span class="token function">string_toDatetime</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>strptime<span class="token punctuation">(</span>string<span class="token punctuation">,</span> <span class="token string">&quot;%Y-%m-%d %H:%M:%S&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># 把字符串转成时间戳形式</span>
<span class="token keyword">def</span> <span class="token function">string_toTimestamp</span><span class="token punctuation">(</span>strTime<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> time<span class="token punctuation">.</span>mktime<span class="token punctuation">(</span>string_toDatetime<span class="token punctuation">(</span>strTime<span class="token punctuation">)</span><span class="token punctuation">.</span>timetuple<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># 把时间戳转成字符串形式</span>
<span class="token keyword">def</span> <span class="token function">timestamp_toString</span><span class="token punctuation">(</span>stamp<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">&quot;%Y-%m-%d %H:%M:%S&quot;</span><span class="token punctuation">,</span> time<span class="token punctuation">.</span>localtime<span class="token punctuation">(</span>stamp<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># 把datetime类型转外时间戳形式</span>
<span class="token keyword">def</span> <span class="token function">datetime_toTimestamp</span><span class="token punctuation">(</span>dateTim<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> time<span class="token punctuation">.</span>mktime<span class="token punctuation">(</span>dateTim<span class="token punctuation">.</span>timetuple<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">timestamp_toDatetime</span><span class="token punctuation">(</span>timestamp<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>fromtimestamp<span class="token punctuation">(</span>timestamp<span class="token punctuation">)</span>
</code></pre></div><ul><li><p>urllib2.unquote(url)</p></li> <li><p>程序环境变量</p></li></ul> <div class="language-python extra-class"><pre class="language-python"><code>os<span class="token punctuation">.</span>environ
</code></pre></div><ul><li>子类初始化父类</li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># new style class也能用这种方法</span>
<span class="token keyword">class</span> <span class="token class-name">B</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span> <span class="token string">'base::init'</span><span class="token punctuation">,</span> s

<span class="token keyword">class</span> <span class="token class-name">C</span><span class="token punctuation">(</span>B<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span> <span class="token string">'child::init'</span><span class="token punctuation">,</span> s
        B<span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>self<span class="token punctuation">,</span> s<span class="token punctuation">)</span>

<span class="token comment"># new style class only</span>
<span class="token keyword">class</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span> <span class="token string">'base::init'</span><span class="token punctuation">,</span> s

<span class="token keyword">class</span> <span class="token class-name">C</span><span class="token punctuation">(</span>B<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span> <span class="token string">'child::init'</span><span class="token punctuation">,</span> s
        <span class="token builtin">super</span><span class="token punctuation">(</span>C<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>s<span class="token punctuation">)</span>
</code></pre></div><ul><li>xml转成dict</li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">xml2dict</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> dic <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    dic<span class="token punctuation">[</span>node<span class="token punctuation">.</span>tag<span class="token punctuation">]</span> <span class="token operator">=</span> ndic <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">[</span>xml2dict<span class="token punctuation">(</span>child<span class="token punctuation">,</span> ndic<span class="token punctuation">)</span> <span class="token keyword">for</span> child <span class="token keyword">in</span> node<span class="token punctuation">.</span>getchildren<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">if</span> child <span class="token operator">!=</span> node<span class="token punctuation">]</span>
    ndic<span class="token punctuation">[</span><span class="token string">'text'</span><span class="token punctuation">]</span> <span class="token operator">=</span> node<span class="token punctuation">.</span>text<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> dic

<span class="token keyword">from</span> xml<span class="token punctuation">.</span>etree <span class="token keyword">import</span> cElementTree <span class="token keyword">as</span> ET
tree <span class="token operator">=</span> ET<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'test.xml'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span> xml2dict<span class="token punctuation">(</span>tree<span class="token punctuation">.</span>getroot<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>ini to dict</li></ul> <div class="language-python extra-class"><pre class="language-python"><code>cf <span class="token operator">=</span> ConfigParser<span class="token punctuation">.</span>ConfigParser<span class="token punctuation">(</span><span class="token punctuation">)</span>
cf<span class="token punctuation">.</span>read<span class="token punctuation">(</span>filename<span class="token punctuation">)</span>
<span class="token keyword">return</span> <span class="token builtin">dict</span><span class="token punctuation">(</span>cf<span class="token punctuation">.</span>__dict__<span class="token punctuation">[</span><span class="token string">'_sections'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#里面有的value是orderdict</span>
</code></pre></div><ul><li>python式enum</li></ul> <div class="language-python extra-class"><pre class="language-python"><code>ALL_TYPES <span class="token operator">=</span> <span class="token punctuation">(</span>
    TOP_LEVEL<span class="token punctuation">,</span>  <span class="token comment"># The type of the 'Google Chrome' folder.</span>
    APPS<span class="token punctuation">,</span>
    APP_NOTIFICATION<span class="token punctuation">,</span>
    APP_SETTINGS<span class="token punctuation">,</span>
    AUTOFILL<span class="token punctuation">,</span>
    AUTOFILL_PROFILE<span class="token punctuation">,</span>
    BOOKMARK<span class="token punctuation">,</span>
    EXTENSIONS<span class="token punctuation">,</span>
    HISTORY_DELETE_DIRECTIVE<span class="token punctuation">,</span>
    NIGORI<span class="token punctuation">,</span>
    PASSWORD<span class="token punctuation">,</span>
    PREFERENCE<span class="token punctuation">,</span>
    SEARCH_ENGINE<span class="token punctuation">,</span>
    SESSION<span class="token punctuation">,</span>
    THEME<span class="token punctuation">,</span>
    TYPED_URL<span class="token punctuation">,</span>
    EXTENSION_SETTINGS<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">17</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><p><code>is</code> will return <code>True</code> if two variables point to the same object, <code>==</code> if the objects referred to by the variables are equal.</p></li> <li><p>计算md5和sha1</p></li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> hashlib

md5 <span class="token operator">=</span> hashlib<span class="token punctuation">.</span>md5<span class="token punctuation">(</span><span class="token punctuation">)</span>
md5<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token string">'string to digest'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span> md5<span class="token punctuation">.</span>hexdigest<span class="token punctuation">(</span><span class="token punctuation">)</span>

sha <span class="token operator">=</span> hashlib<span class="token punctuation">.</span>sha1<span class="token punctuation">(</span><span class="token punctuation">)</span>
sha<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token string">'string to digest'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span> sha<span class="token punctuation">.</span>hexdigest<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>base64编解码</li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> base64
s <span class="token operator">=</span> <span class="token string">'this is a text'</span>
encstr <span class="token operator">=</span> base64<span class="token punctuation">.</span>encodestring<span class="token punctuation">(</span>s<span class="token punctuation">)</span>
decstr <span class="token operator">=</span> base64<span class="token punctuation">.</span>decodestring<span class="token punctuation">(</span>encstr<span class="token punctuation">)</span>
</code></pre></div><ul><li>随机字符</li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> os
length <span class="token operator">=</span> <span class="token number">10</span>
<span class="token keyword">print</span> os<span class="token punctuation">.</span>urandom<span class="token punctuation">(</span>length<span class="token punctuation">)</span>
</code></pre></div><ul><li>getter and setter，不要在构造函数里用这个伪变量，可能会把这个函数覆盖</li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">C</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> __init__<span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>_channel
    @<span class="token builtin">property</span>
    <span class="token keyword">def</span> <span class="token function">channel</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>_channel

    @channel<span class="token punctuation">.</span>setter
    <span class="token keyword">def</span> <span class="token function">channel</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> channel<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>_channel <span class="token operator">=</span> channel
</code></pre></div><ul><li>脚本所在位置</li></ul> <div class="language-python extra-class"><pre class="language-python"><code>__file__

<span class="token comment"># 这种方法能打出行号</span>
<span class="token keyword">from</span> inspect <span class="token keyword">import</span> currentframe<span class="token punctuation">,</span> getframeinfo

frameinfo <span class="token operator">=</span> getframeinfo<span class="token punctuation">(</span>currentframe<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span> frameinfo<span class="token punctuation">.</span>filename<span class="token punctuation">,</span> frameinfo<span class="token punctuation">.</span>lineno
</code></pre></div><ul><li>异常所在的行号</li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> sys<span class="token punctuation">,</span> os

<span class="token keyword">try</span><span class="token punctuation">:</span>
    <span class="token keyword">raise</span> NotImplementedError<span class="token punctuation">(</span><span class="token string">&quot;No error&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
    exc_type<span class="token punctuation">,</span> exc_obj<span class="token punctuation">,</span> exc_tb <span class="token operator">=</span> sys<span class="token punctuation">.</span>exc_info<span class="token punctuation">(</span><span class="token punctuation">)</span>
    fname <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>split<span class="token punctuation">(</span>exc_tb<span class="token punctuation">.</span>tb_frame<span class="token punctuation">.</span>f_code<span class="token punctuation">.</span>co_filename<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>exc_type<span class="token punctuation">,</span> fname<span class="token punctuation">,</span> exc_tb<span class="token punctuation">.</span>tb_lineno<span class="token punctuation">)</span>

</code></pre></div><ul><li>列表拷贝</li></ul> <div class="language-python extra-class"><pre class="language-python"><code>    new_list <span class="token operator">=</span> old_list<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token comment"># 可语性不太好</span>

    new_list <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>old_list<span class="token punctuation">)</span> <span class="token comment"># 这个很直观</span>

    <span class="token keyword">import</span> copy
    new_list <span class="token operator">=</span> copy<span class="token punctuation">.</span>copy<span class="token punctuation">(</span>old_list<span class="token punctuation">)</span> <span class="token comment"># 比list()慢一点，因为需要查出old_list的数据类型</span>

    <span class="token keyword">import</span> copy
    new_list <span class="token operator">=</span> copy<span class="token punctuation">.</span>deepcopy<span class="token punctuation">(</span>old_list<span class="token punctuation">)</span> <span class="token comment"># 深度拷贝，更慢，但是有时有必要</span>

    new_list <span class="token operator">=</span> <span class="token punctuation">[</span>x <span class="token keyword">for</span> x <span class="token keyword">in</span> old_list<span class="token punctuation">]</span>
</code></pre></div><ul><li>列表清空</li></ul> <div class="language-python extra-class"><pre class="language-python"><code>    old_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>

    <span class="token comment"># 方法1</span>
    old_list<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

    <span class="token comment"># 方法2</span>
    new_list <span class="token operator">=</span> old_list
    <span class="token keyword">del</span> new_list<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
</code></pre></div><ul><li>字典格式化字符串</li></ul> <div class="language-python extra-class"><pre class="language-python"><code>    d <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'name'</span> <span class="token punctuation">:</span> <span class="token string">'lightxue'</span><span class="token punctuation">,</span> <span class="token string">'gender'</span> <span class="token punctuation">:</span> <span class="token string">'male'</span><span class="token punctuation">}</span>
    <span class="token keyword">print</span> <span class="token string">'your name is %(name)s, gender is %(gender)s'</span> <span class="token operator">%</span> d
</code></pre></div><ul><li><p>id(object)唯一标识一个对象</p></li> <li><p>变量作用域：LEGB(Local-&gt;函数，def和lambda；Enclosing-&gt;闭包，def和lambda；Global-&gt;全局，在module里；Buid-in-&gt;内置)</p></li> <li><p>binary &lt;-&gt; hex string</p></li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s <span class="token operator">=</span> <span class="token string">'\x01\xff'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'hex_codec'</span><span class="token punctuation">)</span>
<span class="token string">'01ff'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'hex_codec'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'hex_codec'</span><span class="token punctuation">)</span>
<span class="token string">'\x01\xff'</span>
</code></pre></div><ul><li>矩阵转置</li></ul> <div class="language-python extra-class"><pre class="language-python"><code>arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token keyword">print</span> <span class="token builtin">map</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">,</span> <span class="token builtin">zip</span><span class="token punctuation">(</span><span class="token operator">*</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>unicode unescape</li></ul> <div class="language-python extra-class"><pre class="language-python"><code>s <span class="token operator">=</span> r<span class="token string">'\u751f\u547d'</span>
<span class="token keyword">print</span> s<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'unicode-escape'</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>string unescape</li></ul> <div class="language-python extra-class"><pre class="language-python"><code>s <span class="token operator">=</span> r<span class="token string">'\xe7\x94\x9f\xe5\x91\xbd'</span>
<span class="token keyword">print</span> s<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'string-escape'</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><p>list有函数叫count，比较实用</p></li> <li><p>显示某个文件的汇编代码</p></li></ul> <div class="language-python extra-class"><pre class="language-python"><code>python <span class="token operator">-</span>m dis <span class="token builtin">file</span><span class="token punctuation">.</span>py
</code></pre></div><ul><li>看函数/类的汇编代码</li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#!/usr/bin/env python</span>
<span class="token comment"># encoding: utf-8</span>

<span class="token keyword">def</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">)</span><span class="token punctuation">:</span>
    nargs <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span>
    <span class="token keyword">print</span> nargs<span class="token punctuation">,</span> args

<span class="token keyword">class</span> <span class="token class-name">MyObject</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;Example for dis.&quot;&quot;&quot;</span>

    CLASS_ATTRIBUTE <span class="token operator">=</span> <span class="token string">'some value'</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name

    <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">'MyObject(%s)'</span> <span class="token operator">%</span> self<span class="token punctuation">.</span>name

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    <span class="token keyword">import</span> dis
    dis<span class="token punctuation">.</span>dis<span class="token punctuation">(</span>f<span class="token punctuation">)</span>
    dis<span class="token punctuation">.</span>dis<span class="token punctuation">(</span>MyObject<span class="token punctuation">)</span>
</code></pre></div><ul><li>用dis调试</li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#!/usr/bin/env python</span>
<span class="token comment"># encoding: utf-8</span>

i <span class="token operator">=</span> <span class="token number">1</span>
j <span class="token operator">=</span> <span class="token number">0</span>
k <span class="token operator">=</span> <span class="token number">3</span>

<span class="token comment"># ... many lines removed ...</span>

<span class="token keyword">try</span><span class="token punctuation">:</span>
    result <span class="token operator">=</span> k <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">/</span> j<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>i <span class="token operator">/</span> k<span class="token punctuation">)</span>
<span class="token keyword">except</span><span class="token punctuation">:</span>
    <span class="token keyword">import</span> dis
    <span class="token keyword">import</span> sys
    exc_type<span class="token punctuation">,</span> exc_value<span class="token punctuation">,</span> exc_tb <span class="token operator">=</span> sys<span class="token punctuation">.</span>exc_info<span class="token punctuation">(</span><span class="token punctuation">)</span>
    dis<span class="token punctuation">.</span>distb<span class="token punctuation">(</span>exc_tb<span class="token punctuation">)</span>
</code></pre></div><ul><li>把py编译成pyc</li></ul> <div class="language-python extra-class"><pre class="language-python"><code>python <span class="token operator">-</span>m py_compile <span class="token builtin">file</span><span class="token punctuation">.</span>py
</code></pre></div><ul><li>最深代码块限制，在python27源代码里看到这段代码</li></ul> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property">#<span class="token directive keyword">define</span> CO_MAXBLOCKS 20 </span><span class="token comment">/* Max static block nesting within a function */</span>
</code></pre></div><ul><li>合并两个dict</li></ul> <div class="language-c extra-class"><pre class="language-c"><code>d <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'a'</span> <span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'b'</span> <span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">}</span>
d<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'a'</span> <span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'c'</span> <span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
print d
#<span class="token punctuation">{</span><span class="token string">'a'</span> <span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'b'</span> <span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'c'</span> <span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">}</span>
</code></pre></div><ul><li><p>dict.setdefault非常实用</p></li> <li><p>在交互界面里，<code>_</code>保存了最后打印的变量</p></li> <li><p><code>class.__mro__</code>继承关系，方法调用顺序</p></li> <li><p>proto buf的encoder.py里的一段注释</p></li></ul> <div class="language- extra-class"><pre class="language-text"><code>* We copy any needed global functions to local variables, so that we do not need
  to do costly global table lookups at runtime.
* Similarly, we try to do any attribute lookups at startup time if possible.
* Every field's tag is encoded to bytes at startup, since it can't change at
  runtime.
* Whatever component of the field size we can compute at startup, we do.
* We *avoid* sharing code if doing so would make the code slower and not sharing
  does not burden us too much.  For example, encoders for repeated fields do
  not just call the encoders for singular fields in a loop because this would
  add an extra function call overhead for every loop iteration; instead, we
  manually inline the single-value encoder into the loop.
* If a Python function lacks a return statement, Python actually generates
  instructions to pop the result of the last statement off the stack, push
  None onto the stack, and then return that.  If we really don't care what
  value is returned, then we can save two instructions by returning the
  result of the last statement.  It looks funny but it helps.
</code></pre></div><ul><li>py文件编译成pyc</li></ul> <div class="language- extra-class"><pre class="language-text"><code>python -m py_compile file.py
</code></pre></div><ul><li>any不很错</li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># ugly</span>
<span class="token keyword">if</span> needle<span class="token punctuation">.</span>endswith<span class="token punctuation">(</span><span class="token string">'ly'</span><span class="token punctuation">)</span> <span class="token operator">or</span> needle<span class="token punctuation">.</span>endswith<span class="token punctuation">(</span><span class="token string">'ed'</span><span class="token punctuation">)</span> <span class="token operator">or</span> 
    needle<span class="token punctuation">.</span>endswith<span class="token punctuation">(</span><span class="token string">'ing'</span><span class="token punctuation">)</span> <span class="token operator">or</span> needle<span class="token punctuation">.</span>endswith<span class="token punctuation">(</span><span class="token string">'ers'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Is valid'</span><span class="token punctuation">)</span>
<span class="token keyword">else</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Invalid'</span><span class="token punctuation">)</span>

<span class="token comment"># pretty</span>
<span class="token keyword">if</span> <span class="token builtin">any</span><span class="token punctuation">(</span><span class="token punctuation">[</span>needle<span class="token punctuation">.</span>endswith<span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token keyword">for</span> e <span class="token keyword">in</span> <span class="token punctuation">(</span><span class="token string">'ly'</span><span class="token punctuation">,</span> <span class="token string">'ed'</span><span class="token punctuation">,</span> <span class="token string">'ing'</span><span class="token punctuation">,</span> <span class="token string">'ers'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Is valid'</span><span class="token punctuation">)</span>
<span class="token keyword">else</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Invalid'</span><span class="token punctuation">)</span>

<span class="token comment"># better</span>
<span class="token keyword">if</span> needle<span class="token punctuation">.</span>endswith<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'ly'</span><span class="token punctuation">,</span> <span class="token string">'ed'</span><span class="token punctuation">,</span> <span class="token string">'ing'</span><span class="token punctuation">,</span> <span class="token string">'ers'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Is valid'</span><span class="token punctuation">)</span>
<span class="token keyword">else</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Invalid'</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>列表分成n个元素一组</li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> l <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">zip</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token builtin">iter</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
</code></pre></div><ul><li>找出文件最长行</li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token builtin">max</span><span class="token punctuation">(</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'test.txt'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> key<span class="token operator">=</span><span class="token builtin">len</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>整数所有数字相加之和</li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>正无穷和负无穷</li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token builtin">float</span><span class="token punctuation">(</span><span class="token string">'Inf'</span><span class="token punctuation">)</span>
<span class="token builtin">float</span><span class="token punctuation">(</span><span class="token string">'-Inf'</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><p><code>__all__</code>，列表或元组，指出该模块import的时候可以使用哪些对象</p></li> <li><p>显示import指定目录的包</p></li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># import当前目录的包</span>
<span class="token keyword">from</span> <span class="token punctuation">.</span> <span class="token keyword">import</span> tasks
<span class="token keyword">from</span> <span class="token punctuation">.</span>log <span class="token keyword">import</span> logger
<span class="token comment"># 上一级目录的包</span>
<span class="token keyword">from</span> <span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">import</span> tasks
</code></pre></div><ul><li>[Why are Python strings immutable?]
(https://docs.python.org/2/faq/design.html#why-are-python-strings-immutable)</li></ul> <blockquote><p>There are several advantages.</p> <p>One is performance: knowing that a string is immutable
means we can allocate space for it at creation time,
and the storage requirements are fixed and unchanging.
This is also one of the reasons for the distinction between
tuples and lists.</p> <p>Another advantage is that strings in Python are considered as
&quot;elemental&quot; as numbers. No amount of activity will change
the value 8 to anything else, and in Python, no amount of
activity will change the string “eight” to anything else.</p></blockquote> <ul><li>修改默认的ascii编码转换unicode和str</li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> sys
<span class="token builtin">reload</span><span class="token punctuation">(</span>sys<span class="token punctuation">)</span>
sys<span class="token punctuation">.</span>setdefaultencoding<span class="token punctuation">(</span><span class="token string">'UTF-8'</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>给utf8文件写入BOM</li></ul> <div class="language- extra-class"><pre class="language-text"><code>import codecs
fd.write(codecs.BOM_UTF8)

# 或编码选择'utf-8-sig'
</code></pre></div><ul><li><p>神奇的<code>__debug__</code>变量能实现<code>#ifdef</code>，看<a href="http://stackoverflow.com/questions/12524570/how-do-you-implement-ifdef-in-python" target="_blank" rel="noopener noreferrer">这里<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p>修改默认的unicode和str互转的解码格式</p></li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> sys

<span class="token builtin">reload</span><span class="token punctuation">(</span>sys<span class="token punctuation">)</span>
sys<span class="token punctuation">.</span>setdefaultencoding<span class="token punctuation">(</span><span class="token string">'UTF-8'</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>mysql按列名取值</li></ul> <div class="language-python extra-class"><pre class="language-python"><code>cursor <span class="token operator">=</span> conn<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span>MySQLdb<span class="token punctuation">.</span>cursors<span class="token punctuation">.</span>DictCursor<span class="token punctuation">)</span>
cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">&quot;SELECT name, category FROM animal&quot;</span><span class="token punctuation">)</span>
result_set <span class="token operator">=</span> cursor<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> row <span class="token keyword">in</span> result_set<span class="token punctuation">:</span>
    <span class="token keyword">print</span> <span class="token string">&quot;%s, %s&quot;</span> <span class="token operator">%</span> <span class="token punctuation">(</span>row<span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> row<span class="token punctuation">[</span><span class="token string">&quot;category&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>pip源改成阿里云的镜像源</li></ul> <div class="language-ini extra-class"><pre class="language-ini"><code><span class="token comment">; ~/.pip/pip.conf</span>

<span class="token selector">[global]</span>
<span class="token constant">trusted-host</span> <span class="token attr-value"><span class="token punctuation">=</span>  mirrors.aliyun.com</span>
<span class="token constant">index-url</span> <span class="token attr-value"><span class="token punctuation">=</span> http://mirrors.aliyun.com/pypi/simple</span>
</code></pre></div><ul><li>jupyter同时使用Python2和Python3</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>ipython  kernelspec install-self
ipython3 kernelspec install-self
</code></pre></div><ul><li>jsonp转json</li></ul> <div class="language-python extra-class"><pre class="language-python"><code>apijson <span class="token operator">=</span> jsonp<span class="token punctuation">[</span> jsonp<span class="token punctuation">.</span>index<span class="token punctuation">(</span><span class="token string">&quot;(&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">:</span> jsonp<span class="token punctuation">.</span>rindex<span class="token punctuation">(</span><span class="token string">&quot;)&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">]</span>
</code></pre></div><ul><li><p><code>str.format</code>文档 https://pyformat.info</p></li> <li><p><code>strftime</code>文档 http://strftime.org</p></li></ul></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/languages/javascript/" class="prev">
          JavaScript
        </a></span> <span class="next"><a href="/languages/python/logging-usage.html">
          logging使用
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/10.df5a72d0.js" defer></script><script src="/assets/js/app.5b7ffe9c.js" defer></script>
  </body>
</html>
