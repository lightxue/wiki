(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{314:function(t,s,a){"use strict";a.r(s);var v=a(0),n=Object(v.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"awk"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#awk","aria-hidden":"true"}},[t._v("#")]),t._v(" AWK")]),t._v(" "),a("ul",[a("li",[t._v("可以用printf")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token function"}},[t._v("awk")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('\'{printf "%-8s %-8s %-8s %-18s %-22s %-15s\\n",'),a("span",{attrs:{class:"token variable"}},[t._v("$1")]),t._v(","),a("span",{attrs:{class:"token variable"}},[t._v("$2")]),t._v(","),a("span",{attrs:{class:"token variable"}},[t._v("$3")]),t._v(","),a("span",{attrs:{class:"token variable"}},[t._v("$4")]),t._v(","),a("span",{attrs:{class:"token variable"}},[t._v("$5")]),t._v(","),a("span",{attrs:{class:"token variable"}},[t._v("$6")]),t._v("}'")]),t._v(" netstat.txt\n")])])]),a("ul",[a("li",[t._v("只写条件时，{}里为{print}即{print $0}")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token function"}},[t._v("awk")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'"),a("span",{attrs:{class:"token variable"}},[t._v("$6")]),t._v('=="LISTEN" || NR==1\'')]),t._v(" netstat.txt\n")])])]),a("ul",[a("li",[t._v("-F指定分格符")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token function"}},[t._v("awk")]),t._v("  -F: "),a("span",{attrs:{class:"token string"}},[t._v("'{print "),a("span",{attrs:{class:"token variable"}},[t._v("$1")]),t._v(","),a("span",{attrs:{class:"token variable"}},[t._v("$3")]),t._v(","),a("span",{attrs:{class:"token variable"}},[t._v("$6")]),t._v("}'")]),t._v(" /etc/passwd\n")])])]),a("ul",[a("li",[t._v("按第6列重定向文件")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token function"}},[t._v("awk")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'NR!=1{print > "),a("span",{attrs:{class:"token variable"}},[t._v("$6")]),t._v("}'")]),t._v(" netstat.txt\n")])])]),a("ul",[a("li",[t._v("打印99乘法表")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token function"}},[t._v("seq")]),t._v(" 9 "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("sed")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'H;g'")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("awk")]),t._v(" -v RS"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v("''")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('\'{for(i=1;i<=NF;i++)printf("%dx%d=%d%s", i, NR, i*NR, i==NR?"\\n":"\\t")}\'')]),t._v("\n")])])]),a("ul",[a("li",[t._v("-v可以传变量")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token function"}},[t._v("awk")]),t._v(" -v name"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("light "),a("span",{attrs:{class:"token string"}},[t._v("'BEGIN {print name}'")]),t._v("\n")])])]),a("ul",[a("li",[t._v("打印某个域之后的所有域")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("# 第4个域后面所有域")]),t._v("\n"),a("span",{attrs:{class:"token function"}},[t._v("awk")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('\'{for(i=4;i<=NF;i++) printf"%s ",'),a("span",{attrs:{class:"token variable"}},[t._v("$i")]),t._v('} {print ""}\'')]),t._v(" file.txt\n"),a("span",{attrs:{class:"token comment"}},[t._v("# 问题：")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("# 1） 在NF不够4个的记录（行），将会打印出一个空行；")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("# 2） 在输出的结果中，每行结尾多了一个空格；")]),t._v("\n\n"),a("span",{attrs:{class:"token function"}},[t._v("awk")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('\'{for(i=4;i<=NF;i++) printf"%s ",'),a("span",{attrs:{class:"token variable"}},[t._v("$i")]),t._v('};NF>4 {print ""}\'')]),t._v(" file.txt\n"),a("span",{attrs:{class:"token function"}},[t._v("awk")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'NF>4 {for (i=4;i<=NF;i++) {printf "),a("span",{attrs:{class:"token variable"}},[t._v("$i")]),t._v('" "}printf "\\n"}\'')]),t._v(" file.txt\n\n")])])]),a("ul",[a("li",[t._v("按照文件2的key顺序输入文件1内容")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token function"}},[t._v("awk")]),t._v(" -F, "),a("span",{attrs:{class:"token string"}},[t._v("'NR==FNR {r["),a("span",{attrs:{class:"token variable"}},[t._v("$1")]),t._v("] = "),a("span",{attrs:{class:"token variable"}},[t._v("$0")]),t._v("; next} {print r["),a("span",{attrs:{class:"token variable"}},[t._v("$1")]),t._v("]}'")]),t._v(" file1 file2 "),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" file3\n")])])]),a("ul",[a("li",[t._v("awk的内置变量相当实用啊。上网查了一下，做一下记录：")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("变量名")]),t._v(" "),a("th",[t._v("作用")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("$0")]),t._v(" "),a("td",[t._v("当前记录")])]),t._v(" "),a("tr",[a("td",[t._v("$1~$n")]),t._v(" "),a("td",[t._v("当前记录第n个字段，字段间由FS分隔")])]),t._v(" "),a("tr",[a("td",[t._v("FS")]),t._v(" "),a("td",[t._v("输入字段分隔土石方 默认空格")])]),t._v(" "),a("tr",[a("td",[t._v("NF")]),t._v(" "),a("td",[t._v("当前记录中的字段个数，就是有多少列")])]),t._v(" "),a("tr",[a("td",[t._v("NR")]),t._v(" "),a("td",[t._v("已经读出的记录数，就是行号，从1开始")])]),t._v(" "),a("tr",[a("td",[t._v("RS")]),t._v(" "),a("td",[t._v("输入的记录分隔符，默认为换行")])]),t._v(" "),a("tr",[a("td",[t._v("OFS")]),t._v(" "),a("td",[t._v("输出字段分隔符，默认也是空格")])]),t._v(" "),a("tr",[a("td",[t._v("ORS")]),t._v(" "),a("td",[t._v("输出记录分隔符，默认为换行符")])]),t._v(" "),a("tr",[a("td",[t._v("ARGC")]),t._v(" "),a("td",[t._v("命令行参数个数")])]),t._v(" "),a("tr",[a("td",[t._v("ARGV")]),t._v(" "),a("td",[t._v("命令行参数数组")])]),t._v(" "),a("tr",[a("td",[t._v("FILENAME")]),t._v(" "),a("td",[t._v("当前输入文件的名字")])]),t._v(" "),a("tr",[a("td",[t._v("IGNORECASE")]),t._v(" "),a("td",[t._v("如果为真，则进行忽略大小写的匹配")])]),t._v(" "),a("tr",[a("td",[t._v("ARGIND")]),t._v(" "),a("td",[t._v("当前被处理的文件的ARGV标志符")])]),t._v(" "),a("tr",[a("td",[t._v("CONVFMT")]),t._v(" "),a("td",[t._v("数字转换格式 %.6g")])]),t._v(" "),a("tr",[a("td",[t._v("ENVIRON")]),t._v(" "),a("td",[t._v("UNIX环境变量")])]),t._v(" "),a("tr",[a("td",[t._v("ERRNO")]),t._v(" "),a("td",[t._v("UNIX系统错误消息")])]),t._v(" "),a("tr",[a("td",[t._v("FIELDWIDTHS")]),t._v(" "),a("td",[t._v("输入字段宽度的空白分隔字符串")])]),t._v(" "),a("tr",[a("td",[t._v("FNR")]),t._v(" "),a("td",[t._v("也表示当前记录数，但是FNR的作用域只在一个文件内.如果重新打开文件,FNR会从1开始")])]),t._v(" "),a("tr",[a("td",[t._v("OFMT")]),t._v(" "),a("td",[t._v("数字的输出格式 %.6g")])]),t._v(" "),a("tr",[a("td",[t._v("RSART")]),t._v(" "),a("td",[t._v("被匹配函数匹配的字符串首")])]),t._v(" "),a("tr",[a("td",[t._v("RLENGTH")]),t._v(" "),a("td",[t._v("被匹配函数匹配的字符串长度")])]),t._v(" "),a("tr",[a("td",[t._v("SUBSEP")]),t._v(" "),a("td",[t._v("\\034")])])])])])}],!1,null,null,null);n.options.__file="index.md";s.default=n.exports}}]);